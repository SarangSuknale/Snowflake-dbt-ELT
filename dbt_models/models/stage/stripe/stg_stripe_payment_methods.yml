
models:
  - name: stg_stripe_payment_methods
    description: >
                This staging model contains payment method data sourced from Stripe.
                Each row represents a single payment method associated with a customer.
                It includes card details such as brand, expiration information, and
                environment indicators. The data is used to support billing, payment,
                and customer account analysis.
    meta:
      owner: Sarang Suknale
      domain: Payment
      source_system: Stripe
      tags: ['stripe', 'payment method', 'payment']
      refresh_frequency: Daily

    columns:
      - name: payment_method_id
        description: Unique identifier for the payment method in Stripe.
        tests:
          - not_null
          - unique

      - name: object
        description: Type of Stripe object returned by the API, typically "payment_method".

      - name: customer_id
        description: Unique identifier of the Stripe customer associated with the payment method.
        tests:
          - not_null
          - relationships:
              arguments: 
                to: ref('stg_stripe_customers')
                field: customer_id

      - name: type
        description: Type of payment method, such as card or bank account.

      - name: card_brand
        description: Brand of the card associated with the payment method.

      - name: card_last_four_digit
        description: Last four digits of the card number.

      - name: exp_month
        description: Expiration month of the card.

      - name: exp_year
        description: Expiration year of the card.

      - name: created_date
        description: Timestamp when the payment method was created in Stripe.
        tests:
          - not_null

      - name: livemode
        description: Indicates whether the payment method exists in live mode or test mode.
